<!DOCTYPE html>
<html lang="ko">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-yellow.min.css">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <title>이마트24 음성검색 시스템</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>


  <!-- Bootstrap core CSS -->
  <link href="../public/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="../public/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

  <!-- Plugin CSS -->
  <link href="../public/vendor/magnific-popup/magnific-popup.css" rel="stylesheet" type="text/css">

  <!-- Custom styles for this template -->
  <link href="../public/css/freelancer.min.css" rel="stylesheet">
  <style>
    #photo {
    width: 300px; height: 300px;
    object-fit: cover;
    object-position: top;
    border-radius: 50%;
    }
    .pin{
      position:absolute;
      top:0px;
      left:50px;
      width:auto;
      height:auto;
      max-width:70px;
      max-height: 100px;
    }
    .media-object{
      width:auto;
      height:auto;
      margin-left:auto;
      margin-right:auto;
      max-width: 100px;
      max-height:150px;
      
    }
    .demo-card-event.mdl-card {
        width: 175px;
        height: 200px;
        
        background:#ffffff;
        background-size: 175px 200px;
      }

      .demo-card-event>.mdl-card__actions {        
        
        background-color:rgba(0, 0, 0, 0.6);
      }

      .demo-card-event>.mdl-card__title {
        align-items: flex-start;
      }

      .demo-card-event>.mdl-card__title>h4 {
        margin-top: 0;
      }

      .demo-card-event>.mdl-card__actions {
        display: flex;
        box-sizing: border-box;
        align-items: center;
      }

      .demo-card-event>.mdl-card__actions>.material-icons {
        
      }

      .demo-card-event>.mdl-card__title,
      .demo-card-event>.mdl-card__actions,
      .demo-card-event>.mdl-card__actions>.mdl-button {
        text-align:left;
        color: #fff;
        pading-left:5px;
        font-size: 14px;
        font-weight: 500;
      }
    </style>
  <style>
    #mainNav .navbar-nav li.nav-item a.nav-link {
      color: #fff;
    }
    #mainNav .navbar-nav li.nav-item a.nav-link:hover {
      color: #FFB718;
    }
    #mainNav .navbar-nav li.nav-item a.nav-link:active, #mainNav .navbar-nav li.nav-item a.nav-link:focus {
      color: #fff;
    }
    #mainNav .navbar-nav li.nav-item a.nav-link.active {
      color: #fff;
    }
    #mainNav .navbar-nav > li.nav-item > a.nav-link.active {
      color: #fff;
      background: #FFB718;
    }
    #mainNav .navbar-nav > li.nav-item > a.nav-link.active:active, #mainNav .navbar-nav > li.nav-item > a.nav-link.active:focus, #mainNav .navbar-nav > li.nav-item > a.nav-link.active:hover {
      color: #fff;
      background: #FFB718;
    }
    .bg-primary {
      background-color: #E0E3DA !important;
    }
    .bg-secondary {
      background-color: #FFFFF3 !important;
    }
    .bg-third {
      background-color: #FFCC80 !important;
    }
    .footer {
      padding-top: 20px;
      padding-bottom: 0;
      height: 350px;
      background-color: #1a252f;
      color: #fff;
    }
  </style>

</head>

<body id="page-top">
  <script src="/public/javascripts/speechkitt.js"></script>
  <script src="/public/javascripts/annyang.js"></script>
  <script src="/public/javascripts/speechsynthesis.js"></script>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg fixed-top text-uppercase" id="mainNav" style="background-color: #5C5B61">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="#page-top"><img src="img/logo.png" style="width:auto;height:50px;"
          alt=""></a>
      <button class="navbar-toggler navbar-toggler-right text-uppercase bg-primary text-white rounded" type="button"
        data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
        aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#voice">음성검색</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#location">상품위치</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#about">상품정보</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- Header -->
  <header class="masthead bg-primary text-black text-center">
    <section id="voice" style="height:850px">
      <div class="container">
        <img class="img-fluid mb-5 d-block mx-auto" src="img/profile.png" id="photo" alt="">
        <h1 class="text-uppercase mb-0">이마트24 동국대점</h1>
        <h2 class="font-weight-light mt-4 mb-0">인공지능 음성검색 시스템</h2>
        <!-- 음성인식 안될떄의 최후의 보루 그냥 검색창 -->
        <form action="#">
          <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable">
            
            <label class="mdl-button mdl-js-button mdl-button--icon" for="textSearch" >
              <i class="material-icons">search</i>
            </label>
            <div class="mdl-textfield__expandable-holder">
              <input class="mdl-textfield__input" type="text" id="textSearch" style="font-size:36px">
              <label class="mdl-textfield__label" for="sample-expandable">상품명을 입력하세요</label>
            </div>
          </div>
        </form>
      </div>
    </section>
  </header>
  <div id="demo-snackbar-example" style="width:300px; height:auto" class="mdl-js-snackbar mdl-snackbar">
    <div class="mdl-snackbar__text"></div>
    <!-- MDL Spinner Component with Single Color -->
    <div class=" mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div>
    <button class="mdl-snackbar__action" type="button"></button>

  </div>

  <!-- Portfolio Grid Section -->
  <section class="portfolio bg-white" id="location" style="height:850px">
    <div class="container-fluid">

      <div class="row">
        <div class="col-md-4">
          <div class="row">
            <h1 id="map" class="text-center mb-3 offset-md-6">
              <span style="color:#dad252; text-align:center"></span>
              매장 안내도
              </span>
            </h1>
          </div>
          <div class="row">
            <a class="portfolio-item d-block mx-auto" href="#portfolio-modal-1">
              <img src="img/store_map.png" class="float-left" style="width: 600px; height: auto" alt="" script="">
              <img src="img/pin.png" class="pin" alt="" script="">

            </a>
            <!-- Contact Chip -->
          </div>

        </div>
        <!-- Three recommendation -->
        <div class="col-md-6 offset-md-2" style="color:#191970">
          <ul class="media-list">
            <li class="media" id="list_1">
              <div class="media-left">
                <div class="demo-card-event mdl-card mdl-shadow--2dp">
                  <div class="mdl-card__title mdl-card--expand">
                    <img id="item1" class="media-object" src="img/배경.png" alt="...">
                  </div>
                  <div class="mdl-card__actions mdl-card--border mdl-chip--contact" style="background-color:#FFCC80">
                    &nbsp;
                    <span class="mdl-chip__contact mdl-color--red mdl-color-text--white">
                      1
                    </span>
                    <!-- Button Chip -->
                    <button type="button" class="mdl-chip" style="background-color:#FFB718" onclick="moveRT(1)">
                      <span class="mdl-chip__text" style="color:#FFFFF3">정보 / 추천상품</span>
                    </button>
                  </div>
                </div>
              </div>
              <div class="media-body"><br>
                <h3 id="item1_name" class="media-heading" style="margin-left: 20px"></h3>
                <h4 id="item1_price" class="media-left" style="margin-left: 20px"></h4>
                <h4 id="item1_popularity" class="media-left" style="margin-left: 20px"></h4>
              </div>
            </li>
            <br>
            <li class="media" id="list_2">
              <div class="media-left">
                <div class="media-left">
                  <div class="demo-card-event mdl-card mdl-shadow--2dp">
                    <div class="mdl-card__title mdl-card--expand">
                      <img id="item2" class="media-object" src="img/배경.png" alt="...">
                    </div>
                    <div class="mdl-card__actions mdl-card--border mdl-chip--contact" style="background-color:#FFCC80">
                      &nbsp;
                      <span class="mdl-chip__contact mdl-color--blue mdl-color-text--white"> 2</span>
                      <!-- Button Chip -->
                      <button type="button" class="mdl-chip" style="background-color:#FFB718" onclick="moveRT(2)">
                        <span class="mdl-chip__text" style="color:#FFFFF3">정보 / 추천상품</span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="media-body"><br>
                <h3 id="item2_name" class="media-heading" style="margin-left: 20px"></h3>
                <h4 id="item2_price" class="media-left" style="margin-left: 20px"></h4>
                <h4 id="item2_popularity" class="media-left" style="margin-left: 20px"></h4>
              </div>
            </li>
            <br>
            <li class="media" id="list_3">
              <div class="media-left">
                <div class="media-left">
                  <div class="demo-card-event mdl-card mdl-shadow--2dp">
                    <div class="mdl-card__title mdl-card--expand">
                      <img id="item3" class="media-object" src="img/배경.png" alt="...">
                    </div>
                    <div class="mdl-card__actions mdl-card--border mdl-chip--contact" style="background-color:#FFCC80">
                      &nbsp;
                      <span class="mdl-chip__contact mdl-color--teal mdl-color-text--white"> 3</span>
                      <!-- Button Chip -->
                      <button type="button" class="mdl-chip" style="background-color:#FFB718" onclick="moveRT(3)">
                        <span class="mdl-chip__text" style="color:#FFFFF3">정보 / 추천상품</span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="media-body"><br>
                <h3 id="item3_name" class="media-heading" style="margin-left: 20px"></h3>
                <h4 id="item3_price" class="media-left" style="margin-left: 20px"></h4>
                <h4 id="item3_popularity" class="media-left" style="margin-left: 20px"></h4>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <br><br>
  </section>

  <!-- Modal -->
  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="exampleModalLongTitle">이런 맘소사!</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <h3 id="exampleModalBody"></h3>
        </div>
        <div class="modal-footer">
          <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button> -->
          <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="fnMove('voice')"> 재 시도 </button>
        </div>
      </div>
    </div>
  </div>

  <!-- About Section -->
  <section class="bg-third text-white mb-0" id="about">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <div class="row">
            <li class="media mx">
              <div class="media-left">
                <img id="specific" class="media-object border-5 border-primary rounded" src="/img/background_pg3.png"
                  style="width:auto; height: auto; max-width:200px; max-height:300px;" alt="...">
              </div>
              <div class="media-body" style="color:#1a252f"><br>
                <h4 id="specific_name" class="media-heading text-align:center" style="margin-left: 20px">
                </h4>
                <h4 id="specific_price" class="media-left" style="margin-left: 20px">
                </h4>
                <h4 id="specific_event" class="media-left" style="margin-left: 20px">
                </h4>
                <h4 id="specific_popularity" class="media-left" style="margin-left: 20px">
                </h4>
              </div>

            </li>
          </div>
          <br><br><br><br><br><br>
          <div class="row">
            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="7000">
              <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
              </ol>
              <div class="carousel-inner " style="height:auto; width:550px; ">
                <div class="carousel-item active">
                  <img class="d-block w-400" src="event_img/event1.jpg" alt="First slide" style="height:auto; width:auto; max-height: 400px; max-width: 550px">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-400" src="event_img/event2.jpg" alt="Second slide" style="height:auto; width:auto; max-height: 400px; max-width: 550px">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-400" src="event_img/event3.jpg" alt="Third slide" style="height:auto; width:auto; max-height: 400px; max-width: 550px">
                </div>
              </div>
              <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
          </div>

        </div>
        <div class="col-md-6">
          <!-- Event card -->

          <div class = "row" style="color:darkred">
              <div class="col-md-4">
              <h5 id="re_name1" class="media-heading text-align:center"></h5>
              </div>
              <div class="col-md-4">
                  <h5 id="re_name2" class="media-heading text-align:center"></h5>
              </div>
              <div class="col-md-4">
                  <h5 id="re_name3" class="media-heading text-align:center"></h5>
              </div>
          </div>
          <div class="row">
            <div class="col-md-4">
              <div class="demo-card-event mdl-card mdl-shadow--2dp">
                <div class="mdl-card__title mdl-card--expand">
                  <img id="re_item1" class="media-object" src="img/배경.png" alt="...">
                  <h4>
                  </h4>
                </div>
                <div class="mdl-card__actions mdl-card--border">
                  <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="moveMap(1)">
                    위치 찾기
                  </a>
                  <div class="mdl-layout-spacer"></div>
                  <i class="material-icons">location_on</i>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="demo-card-event mdl-card mdl-shadow--2dp">
                <div class="mdl-card__title mdl-card--expand">
                  <img id="re_item2" class="media-object" src="img/배경.png" alt="...">
                  <h4>
                  </h4>
                </div>
                <div class="mdl-card__actions mdl-card--border">
                  <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="moveMap(2)">
                    위치 찾기
                  </a>
                  <div class="mdl-layout-spacer"></div>
                  <i class="material-icons">location_on</i>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="demo-card-event mdl-card mdl-shadow--2dp">
                <div class="mdl-card__title mdl-card--expand">
                  <img id="re_item3" class="media-object" src="img/배경.png" alt="...">
                </div>
                <div class="mdl-card__actions mdl-card--border">
                  <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="moveMap(3)">
                    위치 찾기
                  </a>
                  <div class="mdl-layout-spacer"></div>
                  <i class="material-icons">location_on</i>
                </div>
              </div>
            </div>
          </div>
          <br><br><br>
          <div class = "row" style="color:darkred">
              <div class="col-md-4">
                  <h5 id="re_name4" class="media-heading text-align:center"></h5>
              </div>
              <div class="col-md-4">
                  <h5 id="re_name5" class="media-heading text-align:center"></h5>
                </div>
              <div class="col-md-4">
                  <h5 id="re_name6" class="media-heading text-align:center"></h5>
              </div>
          </div>
          <div class="row">
            <div class="col-md-4">
              <div class="demo-card-event mdl-card mdl-shadow--2dp">
                <div class="mdl-card__title mdl-card--expand">
                  <img id="re_item4" class="media-object" src="img/배경.png" alt="...">
                </div>
                <div class="mdl-card__actions mdl-card--border">
                  <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="moveMap(4)">
                    위치 찾기
                  </a>
                  <div class="mdl-layout-spacer"></div>
                  <i class="material-icons">location_on</i>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="demo-card-event mdl-card mdl-shadow--2dp">
                <div class="mdl-card__title mdl-card--expand">
                  <img id="re_item5" class="media-object" src="img/배경.png" alt="...">
                </div>
                <div class="mdl-card__actions mdl-card--border">
                  <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="moveMap(5)">
                    위치 찾기
                  </a>
                  <div class="mdl-layout-spacer"></div>
                  <i class="material-icons">location_on</i>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="demo-card-event mdl-card mdl-shadow--2dp">
                <div class="mdl-card__title mdl-card--expand">
                  <img id="re_item6" class="media-object" src="img/배경.png" alt="...">

                </div>
                <div class="mdl-card__actions mdl-card--border">
                  <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" onclick="moveMap(6)">
                    위치 찾기
                  </a>
                  <div class="mdl-layout-spacer"></div>
                  <i class="material-icons">location_on</i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  </section>

  <!-- Footer -->
  <footer class="footer text-center">
    <div class="container ">
      <div class="row">
        <div class="col-md-4 mb-5 mb-lg-0"><br>
          <h4 class="text-uppercase mb-4">이마트24</h4><br>
          <p class="lead mb-0">서울특별시 성동구 성수동 2가 281-4 <br>푸조비즈타워</p><br>
          <p>(주) 이마트24 / 사업자등록번호: 105-86-92454</p>
          <p>고객센터: 02-6916-1500 / Fax: 02-6916-1468</p>
        </div>
        <div class="col-md-4 mb-5 mb-lg-0"><br>
          <h4 class="text-uppercase mb-4">Location</h4>
          <ul class="list-inline mb-0">
            <div class="single-footer-widget">
              <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3163.259100626095!2d127.06463929999997!3d37.54895890000002!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x357ca4c12112d2af%3A0x821f58de58f2f007!2z7ZG47KGw67mE7KaI7YOA7JuM!5e0!3m2!1sko!2skr!4v1544767933671"
                width="400" height="210" frameborder="0" style="border:0" allowfullscreen></iframe>
            </div>
          </ul>
        </div>
        <div class="col-md-4"><br>
          <h4 class="text-uppercase mb-4">Copyright &copy; <br></h4>
          <h5>[ Team DNA ]</h5><br>
          <p class="lead mb-0">이진수<br>양승영<br>양준현<br>최정환<br></p>
        </div>
      </div>
    </div>
    </div>
  </footer>

  <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
  <div class="scroll-to-top d-lg-none position-fixed ">
    <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
      <i class="fa fa-chevron-up"></i>
    </a>
  </div>

  <!-- Portfolio Modals -->
  <div class="portfolio-modal mfp-hide" id="portfolio-modal-1">
    <div class="portfolio-modal-dialog bg-white">
      <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
        <i class="fa fa-3x fa-times"></i>
      </a>
      <div class="container text-center">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2 class="text-secondary text-uppercase mb-5">Project Name</h2>
            <img class="img-fluid mb-5" src="img/store_map.png" alt="">
            <p class="mb-5">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Mollitia neque assumenda ipsam
              nihil, molestias magnam, recusandae quos quis inventore quisquam velit asperiores, vitae? Reprehenderit
              soluta, eos quod consequuntur itaque. Nam.</p>
            <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
              <i class="fa fa-close"></i>
              Close Project</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
  <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

  <!-- Contact Form JavaScript -->
  <script src="js/jqBootstrapValidation.js"></script>
  <script src="js/contact_me.js"></script>

  <!-- Custom scripts for this template -->
  <script src="js/freelancer.min.js"></script>
  <script>
    var product_num;
    var items = new Array();
    var re_items = new Array();

    $(document).ready(function () {
      $("#textSearch").keypress(function (e) {
        if (e.which == 13) {
          $(document).delay(1000);
          searchByName($('#textSearch').val());
        }
      });
    });

    function moveMap(id) {
      fnMove('location');
      console.log(id);
      searchByName(re_items[id - 1].RE_Name1);
      console.log(re_items[1].RE_Name1);
    }
    function moveRT(id) {
      fnMove('about');      //3번 페이지로 이동
      // var goods_src = $('#' + id).attr('src');
      // var result = goods_src.split('/');
      // var final_result = result[1].split('.');
      // var real_final_result = final_result[0];  //이미지 이름 = goods 이름
      var specific_product = items[id - 1];   //밑에 whereis함수에서 items에 result저장함

      $.post(
        "/recomandation",
        { goods: specific_product.Name },
        function (data) {
          var i;
          // console.log(str2, pos);
          //console.log("꺼억");
          product_num = data.results.length;
          for (i = 1; i <= data.results.length && i <= 6; i++) {
            re_items[i - 1] = data.results[i - 1];
            $('#re_name' + i).text(data.results[i - 1].RE_Name1);
            $('#re_item' + i).attr('src', 'product_img/' + data.results[i - 1].RE_Name1 + '.png').on('load', function () { this.width });
            //$('#re_item' + i + '_name').text(data.results[i - 1].Name);
            //$('#re_item' + i + '_price').text(data.results[i - 1].Price);

          }
        });

      // 상세상품 설정      
      $('#specific').attr('src', 'product_img/' + specific_product.Name + '.png').on('load', function () { this.width });
      $('#specific_name').text('  제품명 : ' + specific_product.Name);
      $('#specific_price').text('  가격 : ' + specific_product.Price);
      $('#specific_popularity').text('  고객 선호도 : ' + specific_product.Popularity);

      //
    }
    function fnMove(seq) {
      var offset = $("#" + seq).offset().top;
      $('body,html').animate({ scrollTop: offset }, 400);
    }
    // $(document).ready(function () {
    //   for (var i = 1; i <= 3; i++) {
    //     $('#list_' + i).hide();
    //   }
    // });
    function setPin(topItem) {
      var x = '0';
      var y = '0';
      switch (topItem.Category) {
        case '과자':
          console.log(topItem.Location);
          if (topItem.Location % 2) {
            x = '300px';
            y = '80px';
          }
          else {
            x = '340px';
            y = '240px';
          }
          break;
        case '물': case '음료':
          x = '515px';
          y = '60px';
          break;
        case '해외맥주': case '주류': case '국산맥주':
          x = '515px';
          y = '270px';
          break;
        case '숙취해소': case '소화제': case '에너지드링크': case '비타민':
          x = '515px';
          y = '180px';
          break;
        case '커피':
          x = '330px';
          y = '0px';
          break;

        default:
      }

      $('.pin').css("top", y);
      $('.pin').css("left", x);
    }
    function showProductList() {

      for (var i = 1; i <= 3; i++) {
        $('#list_' + i).hide();

      }
      $('.pin').hide();
      for (var i = 1; i <= product_num; i++) {
        $('#list_' + i).show("slow");
      }

      //$('.pin').effect("highlight", {}, 3000);
      $('.pin').hide(300);
      $('.pin').show(400);
      $('.pin').hide(300);
      $('.pin').show(400);
      $('.pin').fadeOut(400).fadeIn(500);
      $('.pin').fadeOut(400).fadeIn(500);
      $('.pin').fadeOut(400).fadeIn(500);


      // $('.pin').show(500);


    };
    function showError(goods) {
      $('#exampleModalCenter').modal("show");
      document.getElementById("exampleModalBody").innerHTML = goods + "의 검색에 실패하였습니다";
    }

    function shotText(goods) {
      'use strict';
      var snackbarContainer = document.querySelector('#demo-snackbar-example');
      var handler = function (event) {

      }
      var data = {
        message: goods + "를 검색중입니다",
        timeout: 500,
        actionHandler: handler,
        actionText: '취소'
      };
      snackbarContainer.MaterialSnackbar.showSnackbar(data);

    };
    var final_transcrip = '';
    var final_react = '';
    var searchByName = function (name) {
      //함수명 searchAagin에서 searchByName으로 변경
      $.post(
        "/",
        { goods: name },
        function (data) {
          var i;

          product_num = data.results.length;
          for (i = 1; i <= data.results.length && i <= 3; i++) {
            items[i - 1] = data.results[i - 1];   //추가한거 확인하세염 진수형
            $('#item' + i).attr('src', 'product_img/' + data.results[i - 1].Name + '.png').on('load', function () { this.width });
            $('#item' + i + '_name').text('상품명 : ' + data.results[i - 1].Name);
            $('#item' + i + '_price').text('가격 : ' + data.results[i - 1].Price);
            $('#item' + i + '_popularity').text('고객 선호도 : ' + data.results[i - 1].Popularity);

          }
          if (data.results.length == 0) {
            speak("상품을 찾지 못했습니다. 다시 한 번 시도해주세요.");
            fnMove("voice");
            showError(name);
            return;
          }
          final_react = name + '의 위치정보 입니다.';
          speak(final_react);
          fnMove("location");
          shotText(name);
          setPin(data.results[0]);
          showProductList();

        });
    }

    var whereIs = function (goods) {
      var pos = goods.search('는');
      var pos2 = goods.search('은');
      var str, str2;
      if (pos != -1) str = goods.slice(0, pos); else str = goods;
      if (pos2 != -1) str2 = goods.slice(0, pos2); else str2 = str;
      $.post(
        "/",
        { goods: str2 },
        function (data) {
          var i;
          console.log(str2, pos);
          product_num = data.results.length;
          for (i = 1; i <= data.results.length && i <= 3; i++) {
            items[i - 1] = data.results[i - 1];   //추가한거 확인하세염 진수형
            $('#item' + i).attr('src', 'product_img/' + data.results[i - 1].Name + '.png').on('load', function () { this.width });
            $('#item' + i + '_name').text(data.results[i - 1].Name);
            $('#item' + i + '_price').text(data.results[i - 1].Price);

          }
          if (data.results.length == 0) {
            speak("상품을 찾지 못했습니다. 다시 한 번 시도해주세요.");
            fnMove("voice");
            showError(str2);
          }
          else {
            final_react = str2 + '의 위치정보 입니다.';
            speak(final_react);
            fnMove("location");
            shotText(str2);
            showProductList();
          }
        });
    }

    var howMuch = function (goods) {
      final_react = goods + '는 1000원이에요';
      // final_react2 = '안해 시발롬아';
      //document.getElementById('react').innerHTML =  '<br/>응답='+final_react;
      speak(final_react);
      fnMove("about");
    }
    var eventInfo = function (tag) {
      speak("행사상품에 대한 정보입니다.");
    }
    var noInfo = function () {
      speak('다시 한번 말씀해주세요.');
    }
    var commands = {
      ':goods (어디) 있어': whereIs,
      ':goods 어딨어': whereIs,
      ':goods 얼마야': howMuch,
      '행사상품 (*tag)': eventInfo,
    }
    annyang.addCommands(commands);
    SpeechKITT.annyang();
    SpeechKITT.setStylesheet('//cdnjs.cloudflare.com/ajax/libs/SpeechKITT/1.0.0/themes/flat.css');
    SpeechKITT.vroom();
    annyang.addCallback('resultNoMatch', function () {
      noInfo();
    });
    annyang.addCallback('resultMatch', function (userSaid, commandText, phrase) {
      console.log(userSaid);
      console.log(commandText);
      console.log(phrase);
    })
  </script>

</body>

</html>